<!DOCTYPE html>

<html>
<head>
  <title>storagejs.min.js</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, target-densitydpi=160dpi, initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
  <link rel="stylesheet" media="all" href="docco.css" />
</head>
<body>
  <div id="container">
    <div id="background"></div>
    
      <ul id="jump_to">
        <li>
          <a class="large" href="javascript:void(0);">Jump To &hellip;</a>
          <a class="small" href="javascript:void(0);">+</a>
          <div id="jump_wrapper">
          <div id="jump_page_wrapper">
            <div id="jump_page">
              
                
                <a class="source" href="storagejs.min.html">
                  storagejs.min.js
                </a>
              
                
                <a class="source" href="storage.html">
                  storage.js
                </a>
              
                
                <a class="source" href="storagejs-1.1.0.html">
                  storagejs-1.1.0.js
                </a>
              
            </div>
          </div>
        </li>
      </ul>
    
    <ul class="sections">
        
          <li id="title">
              <div class="annotation">
                  <h1>storagejs.min.js</h1>
              </div>
          </li>
        
        
        
        <li id="section-1">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-1">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-comment">/*!
 * Storage.js JavaScript Library v0.1.0
 * https://github.com/lcavadas/Storage.js
 *
 * Copyright 2012, Lu√≠s Serralheiro
 */</span>
<span class="hljs-keyword">var</span> storage=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e,o</span>)</span>{<span class="hljs-keyword">var</span> n={sequencialActionCallbackWrapper:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e,o,n</span>)</span>{<span class="hljs-keyword">var</span> t=<span class="hljs-number">0</span>,r=e.length,c=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{r&gt;t?o(e[t++]):n()};<span class="hljs-keyword">return</span>{next:c}},multipleActionCallbackWrapper:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e,o</span>)</span>{<span class="hljs-keyword">var</span> n=[];<span class="hljs-keyword">return</span>{countDown:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{n.push(t),n.length===e&amp;&amp;o(n)}}}},t=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">o</span>)</span>{o?e({set:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e,n,t</span>)</span>{o.set(e,n,t)},setAll:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e,n,t</span>)</span>{o.setAll(e,n,t)},get:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e,n,t</span>)</span>{o.get(e,n,t)},getAll:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e,n</span>)</span>{o.getAll(e,n)},remove:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e,n,t</span>)</span>{o.remove(e,n,t)},removeAll:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e,n</span>)</span>{o.removeAll(e,n)},ready:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>)</span>{o.ready(e)},close:o.close}):e()};<span class="hljs-keyword">switch</span>(o){<span class="hljs-keyword">case</span><span class="hljs-string">"LocalStorage"</span>:storage.KeyValue(t,n);<span class="hljs-keyword">break</span>;<span class="hljs-keyword">case</span><span class="hljs-string">"SessionStorage"</span>:storage.KeyValue(t,n,!<span class="hljs-number">0</span>);<span class="hljs-keyword">break</span>;<span class="hljs-keyword">case</span><span class="hljs-string">"WebSQL"</span>:storage.WebSQL(t,n);<span class="hljs-keyword">break</span>;<span class="hljs-keyword">case</span><span class="hljs-string">"IndexedDB"</span>:storage.IndexedDB(t,n);<span class="hljs-keyword">break</span>;<span class="hljs-keyword">default</span>:<span class="hljs-built_in">window</span>.openDatabase?(<span class="hljs-built_in">window</span>.console.log(<span class="hljs-string">"Using WebSQL"</span>),storage.WebSQL(t,n)):<span class="hljs-built_in">window</span>.indexedDB||<span class="hljs-built_in">window</span>.webkitIndexedDB||<span class="hljs-built_in">window</span>.mozIndexedDB||<span class="hljs-built_in">window</span>.msIndexedDB?(<span class="hljs-built_in">window</span>.console.log(<span class="hljs-string">"Using IndexedDB"</span>),storage.IndexedDB(t,n)):(<span class="hljs-built_in">window</span>.console.log(<span class="hljs-string">"Using LocalStorage"</span>),storage.KeyValue(t,n))}};storage.KeyValue=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e,o,n</span>)</span>{<span class="hljs-keyword">try</span>{<span class="hljs-keyword">var</span> t=n?sessionStorage:localStorage}<span class="hljs-keyword">catch</span>(r){<span class="hljs-keyword">return</span> <span class="hljs-keyword">void</span> e()}<span class="hljs-keyword">var</span> c=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e,o,n</span>)</span>{<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> r=<span class="hljs-built_in">JSON</span>.parse(t.getItem(e)),c=r.length,i=<span class="hljs-number">0</span>;c&gt;i;i++)<span class="hljs-keyword">if</span>(r[i].id===o)<span class="hljs-keyword">return</span> <span class="hljs-keyword">void</span> n(r[i]);n()},i=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e,o,n</span>)</span>{<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> r=<span class="hljs-built_in">JSON</span>.parse(t.getItem(e))||[],c=!<span class="hljs-number">1</span>,i=r.length,a=<span class="hljs-number">0</span>;i&gt;a;a++)r[a].id===o.id&amp;&amp;(c=!<span class="hljs-number">0</span>,r[a]=o);c||r.push(o),t.setItem(e,<span class="hljs-built_in">JSON</span>.stringify(r)),n()},a=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e,o</span>)</span>{<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> n=<span class="hljs-built_in">JSON</span>.parse(t.getItem(e)),r=n.length,c=<span class="hljs-number">0</span>;r&gt;c;c++)<span class="hljs-keyword">if</span>(n[c].id===o)<span class="hljs-keyword">return</span> n.splice(c,<span class="hljs-number">1</span>),<span class="hljs-keyword">void</span> t.setItem(e,<span class="hljs-built_in">JSON</span>.stringify(n))};e({set:i,setAll:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e,n,t</span>)</span>{<span class="hljs-keyword">var</span> r=o.multipleActionCallbackWrapper(n.length,t);n.forEach(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">o</span>)</span>{i(e,o,r.countDown)})},get:c,getAll:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e,o</span>)</span>{<span class="hljs-keyword">var</span> n=t.getItem(e);o(n?<span class="hljs-built_in">JSON</span>.parse(n):[])},remove:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e,o,n</span>)</span>{a(e,o),n()},removeAll:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e,o</span>)</span>{t.removeItem(e),o()},close:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{}})},storage.WebSQL=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e,o</span>)</span>{<span class="hljs-keyword">var</span> n,t=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e,o</span>)</span>{n.transaction(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">n</span>)</span>{n.executeSql(<span class="hljs-string">"CREATE TABLE if not exists "</span>+e+<span class="hljs-string">"(id TEXT NOT NULL, value TEXT, PRIMARY KEY(id));"</span>,[],o,<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e,o</span>)</span>{<span class="hljs-built_in">window</span>.console.log(<span class="hljs-string">"Oops.  Error was "</span>+o.message+<span class="hljs-string">" (Code "</span>+o.code+<span class="hljs-string">")"</span>,o)})})},r=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e,o,c</span>)</span>{n.transaction(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">n</span>)</span>{n.executeSql(<span class="hljs-string">"INSERT OR REPLACE into "</span>+e+<span class="hljs-string">"(id, value) VALUES ( ?, ? );"</span>,[o.id,<span class="hljs-built_in">JSON</span>.stringify(o)],<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{c()},<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">n,i</span>)</span>{<span class="hljs-number">5</span>===i.code?(<span class="hljs-built_in">window</span>.console.log(<span class="hljs-string">"WebSQL: going to create table "</span>+e),t(e,<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-built_in">window</span>.console.log(<span class="hljs-string">"WebSQL: created table "</span>+e),r(e,o,c)})):(<span class="hljs-built_in">window</span>.console.log(<span class="hljs-string">"WebSQL Error: "</span>+i.message+<span class="hljs-string">" (Code "</span>+i.code+<span class="hljs-string">")"</span>,i),c())})})},c=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e,o,t</span>)</span>{n.transaction(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">n</span>)</span>{n.executeSql(<span class="hljs-string">"select value from "</span>+e+<span class="hljs-string">" where id=?;"</span>,[o],<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e,o</span>)</span>{t(o.rows.length&gt;<span class="hljs-number">0</span>?<span class="hljs-built_in">JSON</span>.parse(o.rows.item(<span class="hljs-number">0</span>).value):<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>)},<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e,o</span>)</span>{<span class="hljs-number">5</span>===o.code?t():(<span class="hljs-built_in">window</span>.console.log(<span class="hljs-string">"WebSQL Error: "</span>+o.message+<span class="hljs-string">" (Code "</span>+o.code+<span class="hljs-string">")"</span>,o),t())})})},i=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e,o</span>)</span>{n.transaction(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">n</span>)</span>{n.executeSql(<span class="hljs-string">"select value from "</span>+e,[],<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e,n</span>)</span>{<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> t=[],r=n.rows.length,c=<span class="hljs-number">0</span>;r&gt;c;c++)t.push(<span class="hljs-built_in">JSON</span>.parse(n.rows.item(c).value));o(t)},<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e,n</span>)</span>{<span class="hljs-number">5</span>===n.code?o([]):(<span class="hljs-built_in">window</span>.console.log(<span class="hljs-string">"WebSQL Error: "</span>+n.message+<span class="hljs-string">" (Code "</span>+n.code+<span class="hljs-string">")"</span>,n),o())})})},a=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e,o,t</span>)</span>{n.transaction(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">n</span>)</span>{n.executeSql(<span class="hljs-string">"delete from "</span>+e+<span class="hljs-string">" where id=?"</span>,[o],t,<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e,o</span>)</span>{<span class="hljs-built_in">window</span>.console.log(<span class="hljs-string">"WebSQL Error: "</span>+o.message+<span class="hljs-string">" (Code "</span>+o.code+<span class="hljs-string">")"</span>,o),t()})})},s=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e,o</span>)</span>{n.transaction(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">n</span>)</span>{n.executeSql(<span class="hljs-string">"drop table "</span>+e,[],o,o)})};<span class="hljs-keyword">try</span>{<span class="hljs-keyword">if</span>(<span class="hljs-built_in">window</span>.openDatabase){<span class="hljs-keyword">var</span> l=<span class="hljs-string">"storage.js"</span>,d=<span class="hljs-string">"1.0"</span>,u=<span class="hljs-string">"storage.js database"</span>,g=<span class="hljs-number">65536</span>;n=openDatabase(l,d,u,g),e({set:r,setAll:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e,n,t</span>)</span>{<span class="hljs-keyword">var</span> c=o.multipleActionCallbackWrapper(n.length,t);n.forEach(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">o</span>)</span>{r(e,o,c.countDown)})},get:c,getAll:i,remove:a,removeAll:s,close:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{}})}<span class="hljs-keyword">else</span> <span class="hljs-built_in">window</span>.console.log(<span class="hljs-string">"SQL Database not supported"</span>),e()}<span class="hljs-keyword">catch</span>(f){<span class="hljs-number">2</span>===f?<span class="hljs-built_in">window</span>.console.log(<span class="hljs-string">"Invalid database version."</span>):<span class="hljs-built_in">window</span>.console.log(<span class="hljs-string">"Unknown error "</span>+f+<span class="hljs-string">"."</span>)}},storage.IndexedDB=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e,o</span>)</span>{<span class="hljs-keyword">var</span> n,t=<span class="hljs-built_in">window</span>.indexedDB||<span class="hljs-built_in">window</span>.webkitIndexedDB||<span class="hljs-built_in">window</span>.mozIndexedDB||<span class="hljs-built_in">window</span>.msIndexedDB,r=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e,o</span>)</span>{n.close();<span class="hljs-keyword">var</span> r=t.open(<span class="hljs-string">"storage_js"</span>,(<span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>).getTime());r.onupgradeneeded=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{n=r.result,n.createObjectStore(e,{keyPath:<span class="hljs-string">"id"</span>})},r.onsuccess=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{o()}},c=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e,o,t</span>)</span>{<span class="hljs-keyword">try</span>{<span class="hljs-keyword">if</span>(!n.objectStoreNames.contains(e))<span class="hljs-keyword">return</span> <span class="hljs-built_in">window</span>.console.log(<span class="hljs-string">"IndexedDB: going to create objectStore "</span>+e),<span class="hljs-keyword">void</span> r(e,<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-built_in">window</span>.console.log(<span class="hljs-string">"IndexedDB: created objectStore "</span>+e),c(e,o,t)});<span class="hljs-keyword">var</span> i=n.transaction([e],<span class="hljs-string">"readwrite"</span>),a=i.objectStore(e),s=a.put(o);i.onerror=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>)</span>{<span class="hljs-built_in">window</span>.console.log(<span class="hljs-string">"IndexedDB Error: "</span>+e.message+<span class="hljs-string">" (Code "</span>+e.code+<span class="hljs-string">")"</span>,e)},s.onsuccess=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{t()},s.onerror=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>)</span>{<span class="hljs-built_in">window</span>.console.log(<span class="hljs-string">"IndexedDB Error: "</span>+e.message+<span class="hljs-string">" (Code "</span>+e.code+<span class="hljs-string">")"</span>,e)}}<span class="hljs-keyword">catch</span>(l){<span class="hljs-number">3</span>!==l.code&amp;&amp;<span class="hljs-number">8</span>!==l.code?(<span class="hljs-built_in">window</span>.console.log(<span class="hljs-string">"IndexedDB Error: "</span>+l.message+<span class="hljs-string">" (Code "</span>+l.code+<span class="hljs-string">")"</span>,l),t()):(<span class="hljs-built_in">window</span>.console.log(<span class="hljs-string">"IndexedDB: going to create objectStore "</span>+e),r(e,<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{c(e,o,t)}))}},i=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e,o,t</span>)</span>{<span class="hljs-keyword">try</span>{<span class="hljs-keyword">var</span> r=n.transaction([e],<span class="hljs-string">"readwrite"</span>);r.onerror=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>)</span>{<span class="hljs-built_in">window</span>.console.log(<span class="hljs-string">"IndexedDB Error: "</span>+e.message+<span class="hljs-string">" (Code "</span>+e.code+<span class="hljs-string">")"</span>,e)};<span class="hljs-keyword">var</span> c=r.objectStore(e);c.get(o).onsuccess=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>)</span>{t(e.target.result)}}<span class="hljs-keyword">catch</span>(i){<span class="hljs-built_in">window</span>.console.log(<span class="hljs-string">"IndexedDB Error: "</span>+i.message+<span class="hljs-string">" (Code "</span>+i.code+<span class="hljs-string">")"</span>,i),t()}},a=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e,o</span>)</span>{<span class="hljs-keyword">try</span>{<span class="hljs-keyword">var</span> t=[],r=n.transaction([e],<span class="hljs-string">"readwrite"</span>);r.onerror=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>)</span>{<span class="hljs-built_in">window</span>.console.log(<span class="hljs-string">"IndexedDB Error: "</span>+e.message+<span class="hljs-string">" (Code "</span>+e.code+<span class="hljs-string">")"</span>,e)};<span class="hljs-keyword">var</span> c=r.objectStore(e);c.openCursor().onsuccess=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>)</span>{<span class="hljs-keyword">var</span> n=e.target.result;n?(t.push(n.value),n[<span class="hljs-string">"continue"</span>]()):o(t)}}<span class="hljs-keyword">catch</span>(i){o([])}},s=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e,o,t</span>)</span>{<span class="hljs-keyword">var</span> r=n.transaction([e],<span class="hljs-string">"readwrite"</span>),c=r.objectStore(e);c[<span class="hljs-string">"delete"</span>](o).onsuccess=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{t()}},l=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e,o</span>)</span>{n.close();<span class="hljs-keyword">var</span> r=t.open(<span class="hljs-string">"storage_js"</span>,(<span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>).getTime());r.onupgradeneeded=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">try</span>{n=r.result,n.objectStoreNames.contains(e)&amp;&amp;n.deleteObjectStore(e),o()}<span class="hljs-keyword">catch</span>(t){<span class="hljs-number">3</span>!==t.code&amp;&amp;<span class="hljs-number">8</span>!==t.code?<span class="hljs-built_in">window</span>.console.log(<span class="hljs-string">"IndexedDB Error: "</span>+t.message+<span class="hljs-string">" (Code "</span>+t.code+<span class="hljs-string">")"</span>,t):o()}}},d=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{n.close()};<span class="hljs-keyword">if</span>(t){<span class="hljs-keyword">var</span> u=t.open(<span class="hljs-string">"storage_js"</span>);u.onupgradeneeded=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-built_in">window</span>.console.log(<span class="hljs-string">"UPGRADE NEEDED"</span>)},u.onsuccess=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{n=u.result,e({set:c,setAll:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e,n,t</span>)</span>{<span class="hljs-keyword">var</span> r=o.sequencialActionCallbackWrapper(n,<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">o</span>)</span>{c(e,o,r.next)},t);r.next()},get:i,getAll:a,remove:s,removeAll:l,close:d})},u.onerror=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">o</span>)</span>{<span class="hljs-built_in">window</span>.console.log(<span class="hljs-string">"An error ocurred"</span>,o),e()}}<span class="hljs-keyword">else</span> e()},<span class="hljs-built_in">window</span>.storage=storage,Arenite.Storage=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e,o</span>)</span>{<span class="hljs-keyword">var</span> n,t,r,c=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">c</span>)</span>{<span class="hljs-keyword">if</span>(<span class="hljs-literal">null</span>!==n){<span class="hljs-keyword">var</span> i=e.async.latch(<span class="hljs-number">3</span>,<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-string">"function"</span>==<span class="hljs-keyword">typeof</span> c&amp;&amp;c()},<span class="hljs-string">"storage"</span>);o(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>)</span>{n=e,i.countDown()},<span class="hljs-string">"LocalStorage"</span>),o(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>)</span>{t=e,i.countDown()},<span class="hljs-string">"SessionStorage"</span>),o(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>)</span>{r=e,i.countDown()})}};<span class="hljs-keyword">return</span>{init:c,localStore:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> n},sessionStore:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> t},persistentStore:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> r}}};</pre></div></div>
            
        </li>
        
    </ul>
  </div>
</body>
</html>
