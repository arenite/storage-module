<!DOCTYPE html>

<html>
<head>
  <title>storagejs.min.js</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, target-densitydpi=160dpi, initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
  <link rel="stylesheet" media="all" href="docco.css" />
</head>
<body>
  <div id="container">
    <div id="background"></div>
    
      <ul id="jump_to">
        <li>
          <a class="large" href="javascript:void(0);">Jump To &hellip;</a>
          <a class="small" href="javascript:void(0);">+</a>
          <div id="jump_wrapper">
          <div id="jump_page_wrapper">
            <div id="jump_page">
              
                
                <a class="source" href="storagejs.min.html">
                  storagejs.min.js
                </a>
              
                
                <a class="source" href="storage.html">
                  storage.js
                </a>
              
            </div>
          </div>
        </li>
      </ul>
    
    <ul class="sections">
        
          <li id="title">
              <div class="annotation">
                  <h1>storagejs.min.js</h1>
              </div>
          </li>
        
        
        
        <li id="section-1">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-1">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-comment">/*!
 * Storage.js JavaScript Library v1.1.1
 * https://github.com/lcavadas/Storage.js
 *
 * Copyright 2012-2017, Lu√≠s Serralheiro
 */</span>
<span class="hljs-keyword">var</span> storage=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e,o</span>)</span>{<span class="hljs-keyword">var</span> n={<span class="hljs-attr">sequencialActionCallbackWrapper</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e,o,n</span>)</span>{<span class="hljs-keyword">var</span> t=<span class="hljs-number">0</span>,r=e.length,c=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{t&lt;r?o(e[t++]):n()};<span class="hljs-keyword">return</span>{<span class="hljs-attr">next</span>:c}},<span class="hljs-attr">multipleActionCallbackWrapper</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e,o</span>)</span>{<span class="hljs-keyword">var</span> n=[];<span class="hljs-keyword">return</span>{<span class="hljs-attr">countDown</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{n.push(t),n.length===e&amp;&amp;o(n)}}}},t=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">o</span>)</span>{o?e({<span class="hljs-attr">set</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e,n,t</span>)</span>{o.set(e,n,t)},<span class="hljs-attr">setAll</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e,n,t</span>)</span>{o.setAll(e,n,t)},<span class="hljs-attr">get</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e,n,t</span>)</span>{o.get(e,n,t)},<span class="hljs-attr">getAll</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e,n</span>)</span>{o.getAll(e,n)},<span class="hljs-attr">remove</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e,n,t</span>)</span>{o.remove(e,n,t)},<span class="hljs-attr">removeAll</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e,n</span>)</span>{o.removeAll(e,n)},<span class="hljs-attr">ready</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>)</span>{o.ready(e)},<span class="hljs-attr">close</span>:o.close,<span class="hljs-attr">type</span>:o.type}):e()};<span class="hljs-keyword">switch</span>(o){<span class="hljs-keyword">case</span><span class="hljs-string">"LocalStorage"</span>:storage.KeyValue(t,n);<span class="hljs-keyword">break</span>;<span class="hljs-keyword">case</span><span class="hljs-string">"SessionStorage"</span>:storage.KeyValue(t,n,!<span class="hljs-number">0</span>);<span class="hljs-keyword">break</span>;<span class="hljs-keyword">case</span><span class="hljs-string">"WebSQL"</span>:storage.WebSQL(t,n);<span class="hljs-keyword">break</span>;<span class="hljs-keyword">case</span><span class="hljs-string">"IndexedDB"</span>:storage.IndexedDB(t,n);<span class="hljs-keyword">break</span>;<span class="hljs-keyword">default</span>:<span class="hljs-built_in">window</span>.indexedDB||<span class="hljs-built_in">window</span>.webkitIndexedDB||<span class="hljs-built_in">window</span>.mozIndexedDB||<span class="hljs-built_in">window</span>.msIndexedDB?(<span class="hljs-built_in">window</span>.console.log(<span class="hljs-string">"Using IndexedDB"</span>),storage.IndexedDB(t,n)):<span class="hljs-built_in">window</span>.openDatabase?(<span class="hljs-built_in">window</span>.console.log(<span class="hljs-string">"Using WebSQL"</span>),storage.WebSQL(t,n)):(<span class="hljs-built_in">window</span>.console.log(<span class="hljs-string">"Using LocalStorage"</span>),storage.KeyValue(t,n))}};storage.KeyValue=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e,o,n</span>)</span>{<span class="hljs-keyword">try</span>{<span class="hljs-keyword">var</span> t=n?sessionStorage:localStorage}<span class="hljs-keyword">catch</span>(r){<span class="hljs-keyword">return</span> <span class="hljs-keyword">void</span> e()}<span class="hljs-keyword">var</span> c=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e,o,n</span>)</span>{<span class="hljs-keyword">var</span> r=t.getItem(e);<span class="hljs-keyword">if</span>(r){<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> c=<span class="hljs-built_in">JSON</span>.parse(r),i=c?c.length:<span class="hljs-number">0</span>,s=<span class="hljs-number">0</span>;s&lt;i;s++)<span class="hljs-keyword">if</span>(c[s].id===o)<span class="hljs-keyword">return</span> <span class="hljs-keyword">void</span> n(c[s]);n()}<span class="hljs-keyword">else</span> n()},i=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e,o,n</span>)</span>{<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> r=<span class="hljs-built_in">JSON</span>.parse(t.getItem(e))||[],c=!<span class="hljs-number">1</span>,i=r.length,s=<span class="hljs-number">0</span>;s&lt;i;s++)r[s].id===o.id&amp;&amp;(c=!<span class="hljs-number">0</span>,r[s]=o);c||r.push(o),t.setItem(e,<span class="hljs-built_in">JSON</span>.stringify(r)),n()},s=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e,o</span>)</span>{<span class="hljs-keyword">var</span> n=t.getItem(e);<span class="hljs-keyword">if</span>(n)<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> r=<span class="hljs-built_in">JSON</span>.parse(n),c=r.length,i=<span class="hljs-number">0</span>;i&lt;c;i++)<span class="hljs-keyword">if</span>(r[i].id===o)<span class="hljs-keyword">return</span> r.splice(i,<span class="hljs-number">1</span>),<span class="hljs-keyword">void</span> t.setItem(e,<span class="hljs-built_in">JSON</span>.stringify(r))};e({<span class="hljs-attr">set</span>:i,<span class="hljs-attr">setAll</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e,n,t</span>)</span>{<span class="hljs-keyword">var</span> r=o.multipleActionCallbackWrapper(n.length,t);n.forEach(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">o</span>)</span>{i(e,o,r.countDown)})},<span class="hljs-attr">get</span>:c,<span class="hljs-attr">getAll</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e,o</span>)</span>{<span class="hljs-keyword">var</span> n=t.getItem(e);o(n?<span class="hljs-built_in">JSON</span>.parse(n):[])},<span class="hljs-attr">remove</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e,o,n</span>)</span>{s(e,o),n()},<span class="hljs-attr">removeAll</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e,o</span>)</span>{t.removeItem(e),o()},<span class="hljs-attr">close</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{},<span class="hljs-attr">type</span>:<span class="hljs-string">"KeyValue"</span>})},storage.WebSQL=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e,o</span>)</span>{<span class="hljs-keyword">var</span> n,t=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e,o</span>)</span>{n.transaction(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">n</span>)</span>{n.executeSql(<span class="hljs-string">"CREATE TABLE if not exists "</span>+e+<span class="hljs-string">"(id TEXT NOT NULL, value TEXT, PRIMARY KEY(id));"</span>,[],o,<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e,o</span>)</span>{<span class="hljs-built_in">window</span>.console.log(<span class="hljs-string">"Oops.  Error was "</span>+o.message+<span class="hljs-string">" (Code "</span>+o.code+<span class="hljs-string">")"</span>,o)})})},r=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e,o,c</span>)</span>{n.transaction(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">n</span>)</span>{n.executeSql(<span class="hljs-string">"INSERT OR REPLACE into "</span>+e+<span class="hljs-string">"(id, value) VALUES ( ?, ? );"</span>,[o.id,<span class="hljs-built_in">JSON</span>.stringify(o)],<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{c()},<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">n,i</span>)</span>{<span class="hljs-number">5</span>===i.code?(<span class="hljs-built_in">window</span>.console.log(<span class="hljs-string">"WebSQL: going to create table "</span>+e),t(e,<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-built_in">window</span>.console.log(<span class="hljs-string">"WebSQL: created table "</span>+e),r(e,o,c)})):(<span class="hljs-built_in">window</span>.console.log(<span class="hljs-string">"WebSQL Error: "</span>+i.message+<span class="hljs-string">" (Code "</span>+i.code+<span class="hljs-string">")"</span>,i),c())})})},c=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e,o,t</span>)</span>{n.transaction(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">n</span>)</span>{n.executeSql(<span class="hljs-string">"select value from "</span>+e+<span class="hljs-string">" where id=?;"</span>,[o],<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e,o</span>)</span>{t(o.rows.length&gt;<span class="hljs-number">0</span>?<span class="hljs-built_in">JSON</span>.parse(o.rows.item(<span class="hljs-number">0</span>).value):<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>)},<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e,o</span>)</span>{<span class="hljs-number">5</span>===o.code?t():(<span class="hljs-built_in">window</span>.console.log(<span class="hljs-string">"WebSQL Error: "</span>+o.message+<span class="hljs-string">" (Code "</span>+o.code+<span class="hljs-string">")"</span>,o),t())})})},i=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e,o</span>)</span>{n.transaction(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">n</span>)</span>{n.executeSql(<span class="hljs-string">"select value from "</span>+e,[],<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e,n</span>)</span>{<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> t=[],r=n.rows.length,c=<span class="hljs-number">0</span>;c&lt;r;c++)t.push(<span class="hljs-built_in">JSON</span>.parse(n.rows.item(c).value));o(t)},<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e,n</span>)</span>{<span class="hljs-number">5</span>===n.code?o([]):(<span class="hljs-built_in">window</span>.console.log(<span class="hljs-string">"WebSQL Error: "</span>+n.message+<span class="hljs-string">" (Code "</span>+n.code+<span class="hljs-string">")"</span>,n),o())})})},s=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e,o,t</span>)</span>{n.transaction(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">n</span>)</span>{n.executeSql(<span class="hljs-string">"delete from "</span>+e+<span class="hljs-string">" where id=?"</span>,[o],t,<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e,o</span>)</span>{<span class="hljs-built_in">window</span>.console.log(<span class="hljs-string">"WebSQL Error: "</span>+o.message+<span class="hljs-string">" (Code "</span>+o.code+<span class="hljs-string">")"</span>,o),t()})})},a=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e,o</span>)</span>{n.transaction(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">n</span>)</span>{n.executeSql(<span class="hljs-string">"drop table "</span>+e,[],o,o)})};<span class="hljs-keyword">try</span>{<span class="hljs-keyword">if</span>(<span class="hljs-built_in">window</span>.openDatabase){<span class="hljs-keyword">var</span> d=<span class="hljs-string">"storage.js"</span>,l=<span class="hljs-string">"1.0"</span>,u=<span class="hljs-string">"storage.js database"</span>,f=<span class="hljs-number">65536</span>;n=openDatabase(d,l,u,f),e({<span class="hljs-attr">set</span>:r,<span class="hljs-attr">setAll</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e,n,t</span>)</span>{<span class="hljs-keyword">var</span> c=o.multipleActionCallbackWrapper(n.length,t);n.forEach(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">o</span>)</span>{r(e,o,c.countDown)})},<span class="hljs-attr">get</span>:c,<span class="hljs-attr">getAll</span>:i,<span class="hljs-attr">remove</span>:s,<span class="hljs-attr">removeAll</span>:a,<span class="hljs-attr">close</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{},<span class="hljs-attr">type</span>:<span class="hljs-string">"WebSQL"</span>})}<span class="hljs-keyword">else</span> <span class="hljs-built_in">window</span>.console.log(<span class="hljs-string">"SQL Database not supported"</span>),e()}<span class="hljs-keyword">catch</span>(g){<span class="hljs-number">2</span>===g?<span class="hljs-built_in">window</span>.console.log(<span class="hljs-string">"Invalid database version."</span>):<span class="hljs-built_in">window</span>.console.log(<span class="hljs-string">"Unknown error "</span>+g+<span class="hljs-string">"."</span>)}},storage.IndexedDB=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e,o</span>)</span>{<span class="hljs-keyword">var</span> n,t=<span class="hljs-built_in">window</span>.indexedDB||<span class="hljs-built_in">window</span>.webkitIndexedDB||<span class="hljs-built_in">window</span>.mozIndexedDB||<span class="hljs-built_in">window</span>.msIndexedDB,r=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e,o</span>)</span>{n.close();<span class="hljs-keyword">var</span> r=n.version+<span class="hljs-number">1</span>,c=t.open(<span class="hljs-string">"storage_js"</span>,r);c.onupgradeneeded=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{n=c.result,n.createObjectStore(e,{<span class="hljs-attr">keyPath</span>:<span class="hljs-string">"id"</span>})},c.onsuccess=o},c=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e,o,t</span>)</span>{<span class="hljs-keyword">try</span>{<span class="hljs-keyword">if</span>(!n.objectStoreNames.contains(e))<span class="hljs-keyword">return</span> <span class="hljs-built_in">window</span>.console.log(<span class="hljs-string">"IndexedDB: going to create objectStore "</span>+e),<span class="hljs-keyword">void</span> r(e,<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-built_in">window</span>.console.log(<span class="hljs-string">"IndexedDB: created objectStore "</span>+e),c(e,o,t)});<span class="hljs-keyword">var</span> i=n.transaction([e],<span class="hljs-string">"readwrite"</span>),s=i.objectStore(e),a=s.put(o);i.onerror=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>)</span>{<span class="hljs-built_in">window</span>.console.trace(<span class="hljs-string">"IndexedDB Error: "</span>+e.message+<span class="hljs-string">" (Code "</span>+e.code+<span class="hljs-string">")"</span>,e)},a.onsuccess=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{t()},a.onerror=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>)</span>{<span class="hljs-built_in">window</span>.console.trace(<span class="hljs-string">"IndexedDB Error: "</span>+e.message+<span class="hljs-string">" (Code "</span>+e.code+<span class="hljs-string">")"</span>,e)}}<span class="hljs-keyword">catch</span>(d){<span class="hljs-number">3</span>!==d.code&amp;&amp;<span class="hljs-number">8</span>!==d.code?(<span class="hljs-built_in">window</span>.console.trace(<span class="hljs-string">"IndexedDB Error: "</span>+d.message+<span class="hljs-string">" (Code "</span>+d.code+<span class="hljs-string">")"</span>,d),t()):(<span class="hljs-built_in">window</span>.console.log(<span class="hljs-string">"IndexedDB: going to create objectStore "</span>+e),r(e,<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{c(e,o,t)}))}},i=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e,o,t</span>)</span>{<span class="hljs-keyword">try</span>{<span class="hljs-keyword">if</span>(n.objectStoreNames.contains(e)){<span class="hljs-keyword">var</span> r=n.transaction([e],<span class="hljs-string">"readwrite"</span>);r.onerror=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>)</span>{<span class="hljs-built_in">window</span>.console.trace(<span class="hljs-string">"IndexedDB Error: "</span>+e.message+<span class="hljs-string">" (Code "</span>+e.code+<span class="hljs-string">")"</span>,e)};<span class="hljs-keyword">var</span> c=r.objectStore(e);c.get(o).onsuccess=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>)</span>{t(e.target.result)}}<span class="hljs-keyword">else</span> <span class="hljs-built_in">window</span>.console.log(<span class="hljs-string">"IndexedDB: missing objectStore "</span>+e),t()}<span class="hljs-keyword">catch</span>(i){<span class="hljs-built_in">window</span>.console.trace(<span class="hljs-string">"IndexedDB Error: "</span>+i.message+<span class="hljs-string">" (Code "</span>+i.code+<span class="hljs-string">")"</span>,i),t()}},s=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e,o</span>)</span>{<span class="hljs-keyword">try</span>{<span class="hljs-keyword">var</span> t=[];<span class="hljs-keyword">if</span>(n.objectStoreNames.contains(e)){<span class="hljs-keyword">var</span> r=n.transaction([e],<span class="hljs-string">"readwrite"</span>);r.onerror=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>)</span>{<span class="hljs-built_in">window</span>.console.trace(<span class="hljs-string">"IndexedDB Error: "</span>+e.message+<span class="hljs-string">" (Code "</span>+e.code+<span class="hljs-string">")"</span>,e)};<span class="hljs-keyword">var</span> c=r.objectStore(e);c.openCursor().onsuccess=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>)</span>{<span class="hljs-keyword">var</span> n=e.target.result;n?(t.push(n.value),n[<span class="hljs-string">"continue"</span>]()):o(t)}}<span class="hljs-keyword">else</span> <span class="hljs-built_in">window</span>.console.log(<span class="hljs-string">"IndexedDB: missing objectStore "</span>+e),o(t)}<span class="hljs-keyword">catch</span>(i){o([])}},a=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e,o,t</span>)</span>{<span class="hljs-keyword">if</span>(n.objectStoreNames.contains(e)){<span class="hljs-keyword">var</span> r=n.transaction([e],<span class="hljs-string">"readwrite"</span>),c=r.objectStore(e);c[<span class="hljs-string">"delete"</span>](o).onsuccess=t}<span class="hljs-keyword">else</span> <span class="hljs-built_in">window</span>.console.log(<span class="hljs-string">"IndexedDB: missing objectStore "</span>+e),t()},d=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e,o</span>)</span>{n.close();<span class="hljs-keyword">var</span> r=n.version+<span class="hljs-number">1</span>,c=t.open(<span class="hljs-string">"storage_js"</span>,r);c.onupgradeneeded=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">try</span>{n=c.result,n.objectStoreNames.contains(e)&amp;&amp;n.deleteObjectStore(e)}<span class="hljs-keyword">catch</span>(o){<span class="hljs-number">3</span>!==o.code&amp;&amp;<span class="hljs-number">8</span>!==o.code&amp;&amp;<span class="hljs-built_in">window</span>.console.trace(<span class="hljs-string">"IndexedDB Error: "</span>+o.message+<span class="hljs-string">" (Code "</span>+o.code+<span class="hljs-string">")"</span>,o)}},c.onsuccess=o},l=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{n.close()};<span class="hljs-keyword">if</span>(t){<span class="hljs-keyword">var</span> u=t.open(<span class="hljs-string">"storage_js"</span>);u.onsuccess=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{n=u.result,e({<span class="hljs-attr">set</span>:c,<span class="hljs-attr">setAll</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e,n,t</span>)</span>{<span class="hljs-keyword">var</span> r=o.sequencialActionCallbackWrapper(n,<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">o</span>)</span>{c(e,o,r.next)},t);r.next()},<span class="hljs-attr">get</span>:i,<span class="hljs-attr">getAll</span>:s,<span class="hljs-attr">remove</span>:a,<span class="hljs-attr">removeAll</span>:d,<span class="hljs-attr">close</span>:l,<span class="hljs-attr">type</span>:<span class="hljs-string">"IndexedDB"</span>})},u.onerror=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">o</span>)</span>{<span class="hljs-built_in">window</span>.console.log(<span class="hljs-string">"An error ocurred"</span>,o),e()}}<span class="hljs-keyword">else</span> e()},<span class="hljs-built_in">window</span>.storage=storage,Arenite.Storage=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e,o</span>)</span>{<span class="hljs-keyword">var</span> n,t,r,c=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">c</span>)</span>{<span class="hljs-keyword">if</span>(<span class="hljs-literal">null</span>!==n){<span class="hljs-keyword">var</span> i=e.async.latch(<span class="hljs-number">3</span>,<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-string">"function"</span>==<span class="hljs-keyword">typeof</span> c&amp;&amp;c()},<span class="hljs-string">"storage"</span>);o(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>)</span>{n=e,i.countDown()},<span class="hljs-string">"LocalStorage"</span>),o(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>)</span>{t=e,i.countDown()},<span class="hljs-string">"SessionStorage"</span>),o(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>)</span>{r=e,i.countDown()})}};<span class="hljs-keyword">return</span>{<span class="hljs-attr">init</span>:c,<span class="hljs-attr">localStore</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> n},<span class="hljs-attr">sessionStore</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> t},<span class="hljs-attr">persistentStore</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> r}}};</pre></div></div>
            
        </li>
        
    </ul>
  </div>
</body>
</html>
